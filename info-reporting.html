<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
		<title>信息上报 | 四川省基础教育监测评估中心</title>
		<meta name="keywords" content="四川省基础教育监测评估中心" />
		<meta name="description" content="四川省基础教育监测评估中心" />
		<link rel="stylesheet" href="style/bootstrap.css" />
		<link rel="stylesheet" href="style/education-phone.css" />
	</head>

	<body>
		<header id="infoReportingHeader" role="banner">
			<figure class="info-reporting" id="logo">
				<img src="images/info-reporting.png" alt="四川省基础教育监测评估中心 logo" />
			</figure>
            <nav role="navigation" id="nav">
                <div class="menu-wrap">                    
                    <button id="menu" type="button">
                        <i id="menuIcon" class="iconfont icon-menu"></i>
                    </button>
                </div>                
                <ul id="navList">
                    <!-- 对当前页面的链接添加 active 类名 -->
                    <li><a href="#" title="信息上报" class="active">信息上报</a></li>
                    <li><a href="#" title="功能01">功能01</a></li>
                    <li><a href="#" title="功能02">功能02</a></li>
                    <li><a href="#" title="功能03">功能03</a></li>
                    <li><a href="#" title="功能04">功能04</a></li>
                </ul>
            </nav>
		</header>
		<main id="main" class="info-reporting-main" role="main">
			<ul class="info-reporting-list">
				<li>
					<div class="heading">
						<h3>2017年国家义务教育质量监测省级科研项目2017年国家义务教育质量监测省级科研项目</h3>
						<!--状态分为进行中working，未开始waiting，已过期past（更改class类名对应的字符串）-->
						<span class="status working">
							<i class="iconfont icon-working"></i>
							进行中
						</span>
						<button type="button" class="show-hide iconfont icon-show"></button>
					</div>
					<div class="handle-wrap">
						<time>
							<i class="iconfont icon-date"></i>
							<!--开始时间为 start,结束时间为end-->
							<span class="start">2017/05/08 10:00</span>
							<span class="end">2017/05/09 10:00</span>
						</time>
						<!--操作分为填报fill，投票voting，上报reported，查看see，禁止操作disabled（更改class类名对应的字符串），禁止操作中同时更改一些属性-->
						<div class="handle">
							<a href="#" title="填报" class="fill">填报</a>
						</div>						
					</div>
				</li>
				<li>
					<div class="heading">
						<h3>2017年国家义务教育质量监测省级科研项目</h3>
						<!--状态分为进行中working，未开始waiting，已过期past（更改class类名对应的字符串）-->
						<span class="status waiting">
							<i class="iconfont icon-waiting"></i>
							未开始
						</span>
						<button type="button" class="show-hide iconfont icon-show"></button>
					</div>
					<div class="handle-wrap">
						<time>
							<i class="iconfont icon-date"></i>
							<!--开始时间为 start,结束时间为end-->
							<span class="start">2017/05/08 10:00</span>
							<span class="end">2017/05/09 10:00</span>
						</time>
						<!--操作分为填报fill，投票voting，上报reported，查看see，禁止操作disabled（更改class类名对应的字符串），禁止操作中同时更改一些属性-->
						<div class="handle">
							<a href="#" title="投票" class="voting">投票</a>
						</div>						
					</div>
				</li>
				<li>
					<div class="heading">
						<h3>
							2017年国家义务教育质量监测省级科研项目2017年国家义务教育质量监测省级科研项目
						</h3>
						<!--状态分为进行中working，未开始waiting，已过期past（更改class类名对应的字符串）-->
						<span class="status past">
							<i class="iconfont icon-past"></i>
							已过期
						</span>
						<button type="button" class="show-hide iconfont icon-show"></button>
					</div>
					<div class="handle-wrap">
						<time>
							<i class="iconfont icon-date"></i>
							<!--开始时间为 start,结束时间为end-->
							<span class="start">2017/05/08 10:00</span>
							<span class="end">2017/05/09 10:00</span>
						</time>
						<!--操作分为填报fill，投票voting，上报reported，查看see，禁止操作disabled（更改class类名对应的字符串），禁止操作中同时更改一些属性-->
						<div class="handle">
							<a href="#" title="上报" class="reported">上报</a>
						</div>						
					</div>
				</li>
				<li>
					<div class="heading">
						<h3>
							2017年国家义务教育质量监测省级科研项目2017年国家义务教育质量监测省级科研项目
						</h3>
						<!--状态分为进行中working，未开始waiting，已过期past（更改class类名对应的字符串）-->
						<span class="status working">
							<i class="iconfont icon-working"></i>
							进行中
						</span>
						<button type="button" class="show-hide iconfont icon-show"></button>
					</div>
					<div class="handle-wrap">
						<time>
							<i class="iconfont icon-date"></i>
							<!--开始时间为 start,结束时间为end-->
							<span class="start">2017/05/08 10:00</span>
							<span class="end">2017/05/09 10:00</span>
						</time>
						<!--操作分为填报fill，投票voting，上报reported，查看see，禁止操作disabled（更改class类名对应的字符串），禁止操作中同时更改一些属性-->
						<div class="handle">
							<a href="#" title="查看" class="see">查看</a>
						</div>						
					</div>
				</li>
			</ul>
		</main>
		<footer id="noSloganFooter" role="contentinfo">
			<small>&copy; 四川省基础教育评估中心</small>
			<!--回到顶部-->
			<a id="toTop" href="javascript:void(0);" title="回到顶部">
				<i class="iconfont icon-toTop"></i>
			</a> 
		</footer>
		<script src="script/jquery-3.2.0.min.js"></script>
		<script src="script/bootstrap.min.js"></script>
		<script src="script/education-phone.js"></script>
		<script>			
			/*没有数据时，让底部触底*/
			function noData() {
				var windowHeight = $(window).innerHeight();
				var footerHeight = $("#noSloganFooter").height();
				var headerHeight = $("#infoReportingHeader").height();
				var liLen = $(".info-reporting-list").find("li").length;
				if (liLen == 0){
					$(".info-reporting-list").css({
						"height": windowHeight - footerHeight - headerHeight,
						"marginBottom": 0
					});
					$(".info-reporting-list").append("<img src='images/nodata.png' alt='无数据' style=' display: bblock; max-width: 100%; height: auto; margin-right: auto; margin-left: auto;'>")
				}
			}
			/*dom结构加载完成*/
			$(function(){
				$(".show-hide").on("click", function() {
					$(this).parent().siblings(".handle-wrap").slideToggle();
				});
				
				//执行没有数据的函数
				noData();
				
				/*下拉刷新*/
				var pageNo = 1;
				var pageSize = 10;
				function loadData(){
					$.ajax({
						url:"这里填入要访问的地址pageNo="+pageNo+"&pageSize="+pageSize,
						dataType:"JSON",
						success:function(data){
							if(data.length == 0) {//下拉后没有数据时
								$(".news-list").append("<p style='font-size: 18px; padding-top: 20px; padding-bottom: 20px; text-align: center;'>亲，已无更多内容哦~</p>");
							}
							else{
								$.each(data,function(index,info){
									var html = "<li>"+
													"<div class=\"heading\">"+
														"<h3>"+ info.title + "</h3>"+
														"<span class=\"status working\">"+
															"<i class=\"iconfont icon-working\"></i>" + info.status +
														"</span>"+
														"<button type=\"button\" class=\"show-hide iconfont icon-show\"></button>"+
													"</div>"+
													"<div class=\"handle-wrap\">"+
														"<time>"+
															"<i class=\"iconfont icon-date\"></i>"+
															"<span class=\"start\">" + info.starttime + "</span>"+
															"<span class=\"end\">" + info.endtime + "</span>"+
														"</time>"+
														"<div class=\"handle\">"+
															"<a href=\" " + info.link + " \" title=\" " + info.handle  + " \" class=\" " + info.handleclass + "\">" + info.handle + "</a>"+
														"</div>"+
													"</div>"+
												"</li>";
									//alert("准备插入索引为"+index+"的数据");
									$(".info-reporting-list").append(html);
								});
								pageNo += 1;
							}
						},error:function(){
							alert("加载失败");
						}
					});
				}
				/*向下滑动时，如果文档高度等于窗口高度加上下滑高度时，执行ajax请求*/
				$(window).scroll(function(){
					var scrollTop = $(this).scrollTop();
					var scrollHeight = $(document).height();
					var windowHeight = $(this).height();
					if (scrollTop + windowHeight == scrollHeight) {
						loadData();
					}
				});
			});
		</script>
	</body>

</html>